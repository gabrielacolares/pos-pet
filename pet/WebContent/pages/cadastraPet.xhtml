<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="/pages/_template.xhtml">
	<ui:define name="conteudo">

		<h:form prependId="false">

			<p:messages id="messages" showDetail="true" autoUpdate="true"
				closable="true" />
			<div align="center">
				<h4>
					<p:outputLabel value="Cadastro de Pets" />
				</h4>
			</div>
					<h:panelGrid columns="6" cellpadding="10">
						<p:outputLabel value="Cliente" for="cliente"/>
						<h:panelGroup>
							<p:selectOneMenu id="cliente" value="#{petMB.clienteSelecionado}" required="true">
								<f:selectItem itemLabel="Selecione um cliente"/>
								<f:selectItems value="#{clienteMB.clientesAtivos}" var="cliente" 
								itemLabel="#{cliente.nome}" itemValue="#{cliente.id}" />
								<p:ajax listener="#{petMB.enviarCli}"/>													
							</p:selectOneMenu>	
						</h:panelGroup>
			
						
						<p:outputLabel for="nome" value="Nome do Pet" />
						<p:inputMask id="nome" value="#{petMB.pet.nome}" required="true" />
						
						<p:outputLabel for="tipo" value="Tipo" />
						<h:panelGroup>
							<p:selectOneMenu id="tipo" value="#{petMB.tipoSelecionado}" required="true">
								<f:selectItem itemLabel="Selecione um tipo"/>
								<f:selectItems value="#{tipoMB.tiposAtivos}" var="tipo" 
								itemLabel="#{tipo.nome}" itemValue="#{tipo.id}" />													
								<p:ajax listener="#{petMB.enviarTi}"/>	
							</p:selectOneMenu>	
						</h:panelGroup>
							
						<p:outputLabel for="raca" value="Raça" />
						<p:inputText id="raca" value="#{petMB.pet.raca}" />
						
						<p:outputLabel for="cor" value="Cor" />
						<p:inputText id="cor" name="cor"
							value="#{petMB.pet.cor}" />
							
						<p:outputLabel for="observacao" value="Observação" />
						<p:inputText id="observacao" name="observacao"
							value="#{petMB.pet.observacao}" />
					</h:panelGrid>
	
			<p:outputLabel value="* campos obrigatórios" />
			<center>
					
				<p:commandButton id="salvar" value="Salvar"
					actionListener="#{messagesViewMB.info}" action="#{petMB.salvar}">
				</p:commandButton>
			</center>

		</h:form>

	</ui:define>
</ui:composition>

</html>